<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>VisualNEO Desktop Builder</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self';" />
    <link rel="stylesheet" href="./public/fonts/all.min.css">
    <style>
      :root {
        --bg-dark: #121212;
        --bg-panel: #1e1e1e;
        --bg-sidebar: #181818;
        --bg-input: #2d2d2d;
        --accent: #3d9cd8;
        --accent-gradient: linear-gradient(135deg, #3d9cd8 0%, #2563eb 100%);
        --accent-hover: #60a5fa;
        --text-main: #e0e0e0;
        --text-muted: #a0a0a0;
        --border: #333333;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.16);
      }

      body {
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--bg-dark);
        color: var(--text-main);
        margin: 0;
        display: flex;
        height: 100vh;
        overflow: hidden;
        user-select: none;
      }

      /* Transitions */
      * { transition: background-color 0.2s, border-color 0.2s; }

      /* Sidebar */
      .sidebar {
        width: 260px;
        background-color: var(--bg-sidebar);
        display: flex;
        flex-direction: column;
        border-right: 1px solid var(--border);
        box-shadow: 4px 0 10px rgba(0,0,0,0.2);
        z-index: 10;
      }

      .brand {
        padding: 25px 20px;
        font-size: 1.4rem;
        font-weight: 700;
        color: #fff;
        display: flex;
        align-items: center;
        gap: 12px;
        background: linear-gradient(to bottom, #1e1e1e, #181818);
        border-bottom: 1px solid var(--border);
        letter-spacing: 0.5px;
      }

      .brand i { 
        background: var(--accent-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 1.6rem;
      }

      .nav-item {
        padding: 16px 25px;
        cursor: pointer;
        color: var(--text-muted);
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 0.95rem;
        border-left: 4px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .nav-item:hover { 
        background-color: rgba(255,255,255,0.03); 
        color: #fff;
      }

      .nav-item.active {
        background-color: rgba(61, 156, 216, 0.1);
        border-left-color: var(--accent);
        color: #fff;
        font-weight: 600;
      }

      /* Main Content */
      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        background-color: var(--bg-dark);
        position: relative;
      }

      .header {
        padding: 20px 40px;
        border-bottom: 1px solid var(--border);
        background-color: var(--bg-panel);
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      
      .header h2 { 
        margin: 0; 
        color: white; 
        font-weight: 300; 
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      /* Tab Content Animations */
      .tab-content {
        display: none;
        padding: 40px;
        overflow-y: auto;
        flex: 1;
        opacity: 0;
        transform: translateY(10px);
        animation: none;
      }
      
      @keyframes fadeIn {
        to { opacity: 1; transform: translateY(0); }
      }

      .tab-content.active { 
        display: block; 
        animation: fadeIn 0.3s forwards ease-out;
      }

      /* Forms & Inputs */
      .section-title {
        color: var(--accent);
        border-bottom: 2px solid var(--border);
        padding-bottom: 8px;
        margin-top: 0;
        margin-bottom: 25px;
        font-weight: 600;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .form-group { margin-bottom: 25px; }
      .form-row { display: flex; gap: 25px; margin-bottom: 25px; }
      .col { flex: 1; }

      label {
        display: block;
        margin-bottom: 8px;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      input[type="text"], input[type="number"], textarea, select {
        width: 100%;
        padding: 12px 15px;
        background-color: var(--bg-input);
        border: 1px solid var(--border);
        color: white;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 0.95rem;
        font-family: inherit;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
      }

      input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(61, 156, 216, 0.2);
      }

      textarea { resize: vertical; min-height: 100px; font-family: 'Consolas', monospace; }

      .file-input-wrapper {
        display: flex;
        gap: 10px;
      }

      /* Buttons */
      button {
        padding: 12px 25px;
        background: var(--accent-gradient);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.95rem;
        font-weight: 600;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      button:hover { filter: brightness(1.1); transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
      button:active { transform: translateY(0); }
      
      button.secondary { 
        background: #444; 
        background-image: none;
      }
      button.secondary:hover { background: #555; }

      /* Checkboxes */
      .checkbox-wrapper {
        background: var(--bg-panel);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        user-select: none;
        margin: 0;
        color: var(--text-main);
        font-weight: normal;
        text-transform: none;
      }
      
      .checkbox-group input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--accent);
        cursor: pointer;
      }

      /* Console */
      .footer {
        background-color: #0a0a0a;
        border-top: 1px solid var(--border);
        padding: 15px;
        height: 140px;
        overflow-y: auto;
        font-family: 'Consolas', 'Courier New', monospace;
        font-size: 0.85rem;
        color: #ccc;
      }
      .footer::-webkit-scrollbar { width: 8px; }
      .footer::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
      
      .log-line { margin: 4px 0; word-break: break-all; }
      .log-success { color: #4ade80; }
      .log-info { color: #60a5fa; }
      .log-error { color: #f87171; }
      .log-warn { color: #fbbf24; }

      /* Switch Toggle for PHP */
      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }
      .switch input { opacity: 0; width: 0; height: 0; }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0; left: 0; right: 0; bottom: 0;
        background-color: #444;
        transition: .4s;
        border-radius: 24px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
      }
      input:checked + .slider { background-color: var(--accent); }
      input:checked + .slider:before { transform: translateX(26px); }

      .php-enabled-panel {
        margin-top: 20px;
        padding: 20px;
        background: rgba(61, 156, 216, 0.05);
        border: 1px solid rgba(61, 156, 216, 0.2);
        border-radius: 8px;
      }
      .hidden { display: none; }
    </style>
</head>
<body>

    <div class="sidebar">
      <div class="brand"><i class="fa-solid fa-layer-group"></i> VisualNEO</div>
      <div class="nav-item active" data-tab="project">
        <i class="fa-solid fa-folder-open"></i> Project Source
      </div>
      <div class="nav-item" data-tab="window">
        <i class="fa-solid fa-desktop"></i> Window & UI
      </div>
      <div class="nav-item" data-tab="php">
        <i class="fa-brands fa-php"></i> PHP & Server
      </div>
      <div class="nav-item" data-tab="system">
        <i class="fa-solid fa-cogs"></i> System Logic
      </div>
      <div class="nav-item" data-tab="build">
        <i class="fa-solid fa-hammer"></i> Build & Output
      </div>
    </div>

    <div class="main-content">
      <div class="header">
        <h2 id="header-title"><i class="fa-solid fa-folder-open"></i> Project Source</h2>
      </div>

      <!-- PROJECT TAB -->
      <div id="tab-project" class="tab-content active">
        <h3 class="section-title"><i class="fa-solid fa-info-circle"></i> App Metadata</h3>
        <div class="form-row">
          <div class="col">
            <label>Application ID (System Name)</label>
            <input type="text" id="appName" placeholder="my-awesome-app" value="my-electron-app">
          </div>
          <div class="col">
            <label>Product Name (Title Bar)</label>
            <input type="text" id="productName" placeholder="My Awesome App" value="My Awesome App">
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label>Version</label>
            <input type="text" id="appVersion" value="1.0.0">
          </div>
          <div class="col">
            <label>Author / Company</label>
            <input type="text" id="appAuthor" placeholder="VisualNEO User" value="VisualNEO User">
          </div>
        </div>

        <h3 class="section-title"><i class="fa-solid fa-file-code"></i> Source Code</h3>
        <div class="form-group">
          <label>Web App Source Folder (HTML/PHP)</label>
          <div class="file-input-wrapper">
            <input type="text" id="sourcePath" readonly placeholder="Select the folder containing your website...">
            <button id="btnSelectSource" class="secondary"><i class="fa-solid fa-folder"></i> Browse</button>
          </div>
        </div>
        <div class="form-group">
          <label>Entry Point</label>
          <input type="text" id="entryPoint" value="index.html" placeholder="index.html or login.php">
          <div style="margin-top:5px; font-size: 0.8rem; color: #666;">If using PHP, this is relative to the server root.</div>
        </div>
      </div>

      <!-- WINDOW TAB -->
      <div id="tab-window" class="tab-content">
        <h3 class="section-title"><i class="fa-solid fa-ruler-combined"></i> Dimensions & Start</h3>
        <div class="form-row">
          <div class="col">
            <label>Initial Width</label>
            <input type="number" id="winWidth" value="1280">
          </div>
          <div class="col">
            <label>Initial Height</label>
            <input type="number" id="winHeight" value="800">
          </div>
        </div>
        <div class="form-row">
          <div class="col">
            <label>Min Width (0 = No Limit)</label>
            <input type="number" id="minWidth" value="800">
          </div>
          <div class="col">
            <label>Min Height (0 = No Limit)</label>
            <input type="number" id="minHeight" value="600">
          </div>
        </div>

        <h3 class="section-title"><i class="fa-solid fa-sliders"></i> Behavior & Style</h3>
        <div class="checkbox-wrapper">
          <div class="form-row">
            <div class="col">
              <label class="checkbox-group">
                <input type="checkbox" id="resizable" checked> Allow Resizing
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="fullscreenable" checked> Allow Fullscreen
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="saveState" checked> Save Window State (Size/Pos)
              </label>
            </div>
            <div class="col">
              <label class="checkbox-group">
                <input type="checkbox" id="kiosk"> Kiosk Mode (Locked Fullscreen)
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="nativeFrame" checked> Native OS Window Frame
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="center" checked> Center on Launch
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- PHP TAB -->
      <div id="tab-php" class="tab-content">
        <div style="display: flex; align-items: center; justify-content: space-between;">
           <h3 class="section-title" style="margin:0"><i class="fa-brands fa-php"></i> PHP Backend</h3>
           <div style="display: flex; align-items: center; gap: 10px;">
              <span style="font-size: 0.9rem; color: #aaa;">ENABLE PHP ENGINE</span>
              <label class="switch">
                <input type="checkbox" id="enablePhp">
                <span class="slider"></span>
              </label>
           </div>
        </div>

        <div id="phpPanel" class="php-enabled-panel hidden">
          <div class="form-group">
            <label>PHP Binary Source Folder (CGI/NTS Version)</label>
            <div class="file-input-wrapper">
              <input type="text" id="phpPath" readonly placeholder="Folder containing php.exe...">
              <button id="btnSelectPhp" class="secondary"><i class="fa-solid fa-folder"></i> Select PHP Folder</button>
            </div>
            <div style="font-size: 0.75rem; color: #aaa; margin-top: 5px;">
              The builder will copy this folder into your app. Ensure it contains php.exe and necessary .dlls (Windows) or binaries (Mac/Linux).
            </div>
          </div>

          <div class="form-row">
             <div class="col">
               <label>Internal Server Port</label>
               <input type="number" id="phpPort" value="8000">
             </div>
             <div class="col">
               <label>Memory Limit</label>
               <input type="text" id="phpMemory" value="256M">
             </div>
          </div>
           <div class="form-row">
             <div class="col">
               <label>Upload Max Filesize</label>
               <input type="text" id="phpUpload" value="64M">
             </div>
             <div class="col">
               <label>Max Execution Time (s)</label>
               <input type="text" id="phpTime" value="120">
             </div>
          </div>

          <div class="form-group">
            <label>PHP Extensions (comma separated, without 'php_' prefix)</label>
            <textarea id="phpExtensions" placeholder="openssl, curl, gd, mbstring, sqlite3, pdo_sqlite">openssl, curl, gd, mbstring, sqlite3, pdo_sqlite</textarea>
          </div>
        </div>
        
        <div id="phpDisabledMsg" style="padding: 40px; text-align: center; color: #666; font-style: italic;">
          PHP Integration is disabled. The application will run as a static HTML/JS viewer.
        </div>
      </div>

      <!-- SYSTEM TAB -->
      <div id="tab-system" class="tab-content">
        <h3 class="section-title"><i class="fa-solid fa-microchip"></i> System Integration</h3>
        <div class="checkbox-wrapper">
          <div class="form-row">
            <div class="col">
               <label class="checkbox-group">
                <input type="checkbox" id="trayIcon" checked> Show System Tray Icon
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="minimizeToTray" checked> Minimize to Tray on Close
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="runBackground"> Allow Running in Background
              </label>
            </div>
            <div class="col">
              <label class="checkbox-group">
                <input type="checkbox" id="singleInstance" checked> Enforce Single Instance
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="devTools"> Enable DevTools (F12)
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="contextMenu"> Enable Right-Click Context Menu
              </label>
            </div>
          </div>
        </div>
        
        <h3 class="section-title" style="margin-top:25px"><i class="fa-solid fa-globe"></i> Browser Environment</h3>
        <div class="form-group">
          <label>Custom User Agent</label>
          <input type="text" id="userAgent" placeholder="Leave empty for system default">
        </div>
      </div>

      <!-- BUILD TAB -->
      <div id="tab-build" class="tab-content">
        <h3 class="section-title"><i class="fa-solid fa-images"></i> Branding</h3>
        <div class="form-group">
          <label>Application Icon (.ico, .png, .icns)</label>
          <div class="file-input-wrapper">
            <input type="text" id="iconPath" readonly placeholder="Select icon file...">
            <button id="btnSelectIcon" class="secondary"><i class="fa-solid fa-image"></i> Browse</button>
          </div>
        </div>

        <h3 class="section-title"><i class="fa-solid fa-box-open"></i> Output Formats</h3>
        <div class="checkbox-wrapper">
          <div class="form-row">
            <div class="col">
               <label class="checkbox-group">
                <input type="checkbox" id="targetNsis" checked> Windows Setup (.exe)
              </label>
              <label class="checkbox-group">
                <input type="checkbox" id="targetPortable" checked> Portable Executable (.exe)
              </label>
            </div>
            <div class="col">
              <label class="checkbox-group">
                <input type="checkbox" id="targetUnpacked"> Unpacked Folder (Debug)
              </label>
            </div>
          </div>
        </div>

        <div style="margin-top: 50px; display: flex; flex-direction: column; align-items: center;">
          <button id="btnGenerate" style="padding: 18px 60px; font-size: 1.1rem; border-radius: 50px; box-shadow: 0 10px 20px rgba(61, 156, 216, 0.3);">
            <i class="fa-solid fa-wand-magic-sparkles"></i> GENERATE DESKTOP APP
          </button>
          <p style="margin-top: 15px; color: #666; font-size: 0.85rem;">Generates configuration and build scripts in your source folder.</p>
        </div>
      </div>

      <div class="footer" id="consoleOutput">
        <div class="log-line">> VisualNEO Desktop Builder v2.0 initialized.</div>
        <div class="log-line">> Ready to convert Web Apps to Desktop Software.</div>
      </div>
    </div>

    <script src="./renderer.js"></script>
</body>
</html>